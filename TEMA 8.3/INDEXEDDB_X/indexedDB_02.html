<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>indexedDB_02 - Eliminar una BBDD indexedDB</title>
</head>

<body>
    <h1>indexedDB_02 - Eliminar una BBDD indexedDB</h1>
    <h2>Ver consola</h2>
    <legend>Nombre de la BBDD:</legend>
    <input type="text" id="bdnombre" />
    <br /><br />
    <hr>
    <button id="botonEliminar" onclick="eliminarBD();">ELIMINAR</button>
    <hr>

    <script type="text/javascript">
        var peticion;

        function eliminarBD() {
            var nombre = document.getElementById("bdnombre").value;
            if (nombre != "") {
                var peticion = window.indexedDB.deleteDatabase(nombre);

                peticion.onsuccess = function(evento) {
                    //Eliminar una BBDD no existente no produce error
                    console.log("EVENTO: success\nBBDD eliminada correctamente");
                }

                peticion.onblocked = function(evento) {
                    console.log("EVENTO: blocked\nLa BBDD ha sido bloqueada\nCuando desea eliminar una BBDD abierta y no cerrada");
                }
            } else {
                alert("Introduzca el nombre de la BBDD");
            }
        }
    </script>
</body>

</html>