<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ajax_01 - Básico</title>
    <link rel="icon" type="image/x-icon" href="../recursos/favicon.ico">
    <style type="text/css">
        div {
            border: 2px solid red;
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <h1>ajax_01 - Básico</h1>
    <button onclick="realizarPeticion();">Realizar petición</button>
    <div id="contenido"></div>

    <script type="text/javascript">
        function realizarPeticion() {
            var peticion;

            //PASO 1: Creación del objeto XMLHttpRequest
            if (window.XMLHttpRequest) {
                peticion = new XMLHttpRequest();
            } else if (window.ActiveXObject) {
                peticion = new ActiveXObject("Microsoft.XMLHTTP");
            }

            //PASO 2: Realizar la petición al servidor
            /*
            El parámetro booleano indica si se debe o no realizar la operación de forma asíncrona. 
            Si este valor es false, el método send() no se devuelve hasta que se reciba la respuesta completa.
            */
            peticion.open('GET', 'ajax_01.txt', true);
            peticion.send(null);

            //PASO 3: Gestionar la respuesta (en este caso con una función anónima)
            peticion.onreadystatechange = function(evento) {
                if ((peticion.readyState == 4) && ((peticion.status == 200))) {
                    //PASO 4: procesar la respuesta
                    document.getElementById("contenido").innerHTML = peticion.responseText;
                }
            };
        }
    </script>
</body>

</html>